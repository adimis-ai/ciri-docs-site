"use strict";(self.webpackChunkciri_docs=self.webpackChunkciri_docs||[]).push([[9617],{3257(e,n,i){i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>l,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"architecture/components-deep","title":"Architecture - Components (Deep Dive)","description":"This page provides a high-resolution view of the CIRI internals and their implementation details.","source":"@site/docs/architecture/components-deep.md","sourceDirName":"architecture","slug":"/architecture/components-deep","permalink":"/docs/architecture/components-deep","draft":false,"unlisted":false,"editUrl":"https://github.com/adimis-ai/ciri/tree/main/docs-site/docs/architecture/components-deep.md","tags":[],"version":"current","frontMatter":{}}');var r=i(4848),t=i(8453);const l={},o="Architecture - Components (Deep Dive)",c={},d=[{value:"Detailed Boot Sequence",id:"detailed-boot-sequence",level:2},{value:"The Middleware Stack",id:"the-middleware-stack",level:2},{value:"Advanced Implementation Notes",id:"advanced-implementation-notes",level:2},{value:"Developer Pointers",id:"developer-pointers",level:2}];function a(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"architecture---components-deep-dive",children:"Architecture - Components (Deep Dive)"})}),"\n",(0,r.jsx)(n.p,{children:"This page provides a high-resolution view of the CIRI internals and their implementation details."}),"\n",(0,r.jsx)(n.h2,{id:"detailed-boot-sequence",children:"Detailed Boot Sequence"}),"\n",(0,r.jsx)(n.p,{children:"The CLI initialization follows a strict sequence to ensure all local capabilities are hot-loaded correctly:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"CLI Start"})," (",(0,r.jsx)(n.code,{children:"src/__main__.py"}),"): Loads ",(0,r.jsx)(n.code,{children:".env"}),", settings, and triggers ",(0,r.jsx)(n.code,{children:"sync_default_skills()"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Graph Compilation"})," (",(0,r.jsx)(n.code,{children:"create_copilot"})," in ",(0,r.jsx)(n.code,{children:"src/copilot.py"}),"):","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Initializes the ",(0,r.jsx)(n.code,{children:"LLMConfig"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["Connects to the ",(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.a,{href:"/docs/features/web-research",children:"Web Research"})})," CDP endpoint."]}),"\n",(0,r.jsxs)(n.li,{children:["Builds specialized builders (",(0,r.jsx)(n.strong,{children:"Skill"}),", ",(0,r.jsx)(n.strong,{children:"Toolkit"}),", ",(0,r.jsx)(n.strong,{children:"SubAgent"}),", and ",(0,r.jsx)(n.strong,{children:"Trainer"}),")."]}),"\n",(0,r.jsxs)(n.li,{children:["Injects ",(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.a,{href:"/docs/features/memory",children:"Memory"})})," and ",(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.a,{href:"/docs/skills-guide",children:"Skills"})})," via the middleware stack."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Controller Hand-off"})," (",(0,r.jsx)(n.code,{children:"src/controller.py"}),"): Wraps the graph in a thread-safe execution interface."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"the-middleware-stack",children:"The Middleware Stack"}),"\n",(0,r.jsx)(n.p,{children:"CIRI uses a recursive middleware pattern where each subagent inherits the capabilities of the main copilot:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"ToolkitInjectionMiddleware"}),": Discovers and injects MCP servers on-the-fly."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"SkillsMiddleware"}),": Scans ",(0,r.jsx)(n.code,{children:".ciri/skills/"})," and provides them as standard tools."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"MemoryMiddleware"}),": Reads workspace-local markdown files for long-term context."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"SubAgentMiddleware"}),': The "Router" that delegates to specialists like the ',(0,r.jsx)(n.code,{children:"web_researcher"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"advanced-implementation-notes",children:"Advanced Implementation Notes"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Self-Evolution"})," (",(0,r.jsx)(n.code,{children:"src/subagents/trainer_agent.py"}),"): Uses a multi-step planning loop to design and implement new skills. See the ",(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.a,{href:"/docs/internals/self-evolution",children:"Self-Evolution guide"})})," for more."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"State Persistence"})," (",(0,r.jsx)(n.code,{children:"src/serializers.py"}),"): Implements custom JSON serializers (",(0,r.jsx)(n.code,{children:"CiriJsonPlusSerializer"}),") to handle complex Python types (locks, threads, etc.) during checkpointing."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Browser Automation"})," (",(0,r.jsx)(n.code,{children:"src/utils.py"})," and ",(0,r.jsx)(n.code,{children:"src/toolkit/crawler.py"}),"): Provides the CDP bridge that allows the ",(0,r.jsx)(n.code,{children:"web_researcher"})," to drive your real browser."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"developer-pointers",children:"Developer Pointers"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Custom Middlewares"}),": Add new layers in ",(0,r.jsx)(n.code,{children:"create_copilot()"})," within ",(0,r.jsx)(n.code,{children:"src/copilot.py"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Tool Logic"}),": Implement new core tools as LangChain ",(0,r.jsx)(n.code,{children:"@tool"})," functions and add them to the ",(0,r.jsx)(n.code,{children:"merged_tools"})," list in ",(0,r.jsx)(n.code,{children:"src/copilot.py"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Autocomplete"}),": Extend ",(0,r.jsx)(n.code,{children:"CiriCompleter"})," in ",(0,r.jsx)(n.code,{children:"src/__main__.py"})," to handle new interactive triggers."]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},8453(e,n,i){i.d(n,{R:()=>l,x:()=>o});var s=i(6540);const r={},t=s.createContext(r);function l(e){const n=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);