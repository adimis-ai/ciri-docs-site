"use strict";(self.webpackChunkciri_docs=self.webpackChunkciri_docs||[]).push([[4884],{1867(e,r,i){i.r(r),i.d(r,{assets:()=>d,contentTitle:()=>c,default:()=>h,frontMatter:()=>o,metadata:()=>n,toc:()=>l});const n=JSON.parse('{"id":"security","title":"Security & Privacy","description":"Ciri is designed to be local-first: your state lives on your machine, your keys stay in your environment, and you approve every consequential action before it runs. This guide explains the full security model.","source":"@site/docs/security.md","sourceDirName":".","slug":"/security","permalink":"/docs/security","draft":false,"unlisted":false,"editUrl":"https://github.com/adimis-ai/ciri/tree/main/docs-site/docs/security.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Contributing to Ciri","permalink":"/docs/contributing"},"next":{"title":"FAQ","permalink":"/docs/faq"}}');var s=i(4848),t=i(8453);const o={},c="Security & Privacy",d={},l=[{value:"What Stays Local",id:"what-stays-local",level:2},{value:"What Goes to the Cloud",id:"what-goes-to-the-cloud",level:2},{value:"API Key Management",id:"api-key-management",level:2},{value:"Human-in-the-Loop: The Primary Safety Gate",id:"human-in-the-loop-the-primary-safety-gate",level:2},{value:"Filesystem Safety",id:"filesystem-safety",level:2},{value:"Browser Profile Safety (CDP)",id:"browser-profile-safety-cdp",level:2},{value:"Third-Party Dependencies",id:"third-party-dependencies",level:2},{value:"Reporting Security Issues",id:"reporting-security-issues",level:2}];function a(e){const r={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",hr:"hr",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.header,{children:(0,s.jsx)(r.h1,{id:"security--privacy",children:"Security & Privacy"})}),"\n",(0,s.jsxs)(r.p,{children:["Ciri is designed to be ",(0,s.jsx)(r.strong,{children:"local-first"}),": your state lives on your machine, your keys stay in your environment, and you approve every consequential action before it runs. This guide explains the full security model."]}),"\n",(0,s.jsx)(r.hr,{}),"\n",(0,s.jsx)(r.h2,{id:"what-stays-local",children:"What Stays Local"}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Data"}),(0,s.jsx)(r.th,{children:"Where"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"Conversation threads"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"~/.ciri/data/ciri.db"})})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"LangGraph checkpoints"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"~/.ciri/data/ciri.db"})})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"Workspace memory files"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:".ciri/memory/*.md"})})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"Core harness (skills, subagents, toolkits)"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"~/.local/share/ciri/"})})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"API keys"}),(0,s.jsx)(r.td,{children:"OS keychain / env vars"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"Browser profile copy"}),(0,s.jsx)(r.td,{children:"OS temp directory"})]})]})]}),"\n",(0,s.jsx)(r.p,{children:"Nothing is sent to Adimis servers. There is no telemetry, no account, no cloud sync."}),"\n",(0,s.jsx)(r.hr,{}),"\n",(0,s.jsx)(r.h2,{id:"what-goes-to-the-cloud",children:"What Goes to the Cloud"}),"\n",(0,s.jsxs)(r.p,{children:["When you send a message, Ciri assembles a prompt and sends it to your configured ",(0,s.jsx)(r.strong,{children:"LLM provider"})," (Anthropic, OpenAI, Groq, etc.):"]}),"\n",(0,s.jsx)(r.mermaid,{value:"flowchart LR\n  User([You]) --\x3e CLI[Ciri CLI]\n  CLI --\x3e Graph[LangGraph Copilot]\n  Graph --\x3e Provider[LLM Provider API]\n  Graph --\x3e LocalDB[(Local SQLite)]\n  Provider --\x3e ExtNet[Provider's Infrastructure]\n\n  style LocalDB fill:#d1f7c4,stroke:#6cc644\n  style Provider fill:#ffdcb1,stroke:#f08030\n  style ExtNet fill:#ffdcb1,stroke:#f08030"}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"What is sent to the provider:"})}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"Your message text"}),"\n",(0,s.jsx)(r.li,{children:"System prompt (base instructions + injected memory + skill context)"}),"\n",(0,s.jsx)(r.li,{children:"Conversation history up to the context window"}),"\n",(0,s.jsxs)(r.li,{children:["Any file content you explicitly share (via ",(0,s.jsx)(r.code,{children:"@files:"})," or paste)"]}),"\n"]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"What is NOT sent:"})}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"Files you haven't mentioned or attached"}),"\n",(0,s.jsx)(r.li,{children:"Your API keys"}),"\n",(0,s.jsx)(r.li,{children:"Your SQLite database"}),"\n",(0,s.jsx)(r.li,{children:"Browser session cookies"}),"\n"]}),"\n",(0,s.jsx)(r.p,{children:"Review your provider's data retention and privacy policy before sharing sensitive information."}),"\n",(0,s.jsx)(r.hr,{}),"\n",(0,s.jsx)(r.h2,{id:"api-key-management",children:"API Key Management"}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"Best practice:"})," use environment variables, never hardcoded values."]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-bash",children:'# In your shell profile (~/.bashrc, ~/.zshrc)\nexport ANTHROPIC_API_KEY="sk-ant-..."\nexport OPENAI_API_KEY="sk-..."\nexport OPENROUTER_API_KEY="sk-or-..."\n'})}),"\n",(0,s.jsx)(r.p,{children:"Ciri reads keys from environment variables at startup. You can also store keys in the OS keychain."}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Never:"})}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:["Commit ",(0,s.jsx)(r.code,{children:".env"})," files containing keys to version control"]}),"\n",(0,s.jsxs)(r.li,{children:["Add keys to ",(0,s.jsx)(r.code,{children:".ciri/memory/"})," files (they are injected into every prompt)"]}),"\n",(0,s.jsxs)(r.li,{children:["Share your ",(0,s.jsx)(r.code,{children:"~/.ciri/data/ciri.db"})," file (it contains full conversation history)"]}),"\n"]}),"\n",(0,s.jsx)(r.hr,{}),"\n",(0,s.jsx)(r.h2,{id:"human-in-the-loop-the-primary-safety-gate",children:"Human-in-the-Loop: The Primary Safety Gate"}),"\n",(0,s.jsxs)(r.p,{children:["Every consequential tool call goes through ",(0,s.jsx)(r.code,{children:"HumanInTheLoopMiddleware"})," before execution. This is not optional by default."]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Default interrupt triggers:"})}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Tool"}),(0,s.jsx)(r.th,{children:"Risk"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"execute"})}),(0,s.jsx)(r.td,{children:"Runs arbitrary shell commands"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"edit_file"})}),(0,s.jsx)(r.td,{children:"Modifies files on disk"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"write_file"})}),(0,s.jsx)(r.td,{children:"Creates or overwrites files"})]})]})]}),"\n",(0,s.jsx)(r.p,{children:"When triggered, Ciri pauses and shows a Rich approval panel:"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{children:'\u256d\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256e\n\u2502  \ud83d\udd12 Tool Execution Approval Required         \u2502\n\u2502                                              \u2502\n\u2502  \u2699\ufe0f  execute                                  \u2502\n\u2502  Run a shell command                         \u2502\n\u2502                                              \u2502\n\u2502  {                                           \u2502\n\u2502    "command": "rm -rf ./old-reports/",       \u2502\n\u2502    "cwd": "/home/user/workspace"             \u2502\n\u2502  }                                           \u2502\n\u2502                                              \u2502\n\u2502  [a] Approve  [e] Edit args  [r] Reject      \u2502\n\u2570\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256f\n'})}),"\n",(0,s.jsx)(r.p,{children:"You inspect the exact arguments before anything runs. You can edit the JSON or reject the call entirely."}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"Script execution"})," (",(0,s.jsx)(r.code,{children:"execute_script"}),") also requires approval, showing the full script content, language, dependencies, and output directory."]}),"\n",(0,s.jsx)(r.hr,{}),"\n",(0,s.jsx)(r.h2,{id:"filesystem-safety",children:"Filesystem Safety"}),"\n",(0,s.jsxs)(r.p,{children:["Ciri's filesystem tools (",(0,s.jsx)(r.code,{children:"read_file"}),", ",(0,s.jsx)(r.code,{children:"write_file"}),", ",(0,s.jsx)(r.code,{children:"edit_file"}),", ",(0,s.jsx)(r.code,{children:"list_dir"}),") are provided by ",(0,s.jsx)(r.code,{children:"FilesystemMiddleware"}),", which scopes all file access to the workspace root by default."]}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"Tools cannot path-traverse outside the configured root without explicit override"}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"write_file"})," and ",(0,s.jsx)(r.code,{children:"edit_file"})," require HITL approval before any write occurs"]}),"\n",(0,s.jsx)(r.li,{children:"Toolkit MCP servers run as isolated subprocesses; their filesystem access depends on their own implementation"}),"\n"]}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"Recommendation:"})," Configure toolkit servers to use allowlists for filesystem access (only the directories they need)."]}),"\n",(0,s.jsx)(r.hr,{}),"\n",(0,s.jsx)(r.hr,{}),"\n",(0,s.jsx)(r.h2,{id:"browser-profile-safety-cdp",children:"Browser Profile Safety (CDP)"}),"\n",(0,s.jsx)(r.p,{children:"Ciri's web research uses Chrome DevTools Protocol on port 9222. When connecting to a browser:"}),"\n",(0,s.jsxs)(r.ol,{children:["\n",(0,s.jsxs)(r.li,{children:["Ciri copies your selected Chrome profile to a ",(0,s.jsx)(r.strong,{children:"temporary directory"})]}),"\n",(0,s.jsxs)(r.li,{children:["Launches Chrome pointing at the temp directory with ",(0,s.jsx)(r.code,{children:"--remote-debugging-port=9222"})]}),"\n",(0,s.jsx)(r.li,{children:"The original profile is never modified"}),"\n",(0,s.jsx)(r.li,{children:"The temporary profile directory is cleaned up on exit"}),"\n"]}),"\n",(0,s.jsxs)(r.p,{children:["This design complies with Chrome v136+'s enforcement of unique ",(0,s.jsx)(r.code,{children:"--user-data-dir"})," for remote-debug sessions and prevents cross-contamination between your regular browsing and Ciri's browser sessions."]}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"Note:"})," The temp profile copy contains your cookies and login state for that profile. Do not share temp directories or inspect them for credentials."]}),"\n",(0,s.jsx)(r.hr,{}),"\n",(0,s.jsx)(r.h2,{id:"third-party-dependencies",children:"Third-Party Dependencies"}),"\n",(0,s.jsx)(r.p,{children:"Ciri's dependency surface is broad. Recommended practices:"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-bash",children:"# Audit installed packages for known vulnerabilities\npip-audit\n\n# Keep dependencies current\nuv sync --upgrade\n"})}),"\n",(0,s.jsx)(r.p,{children:"Key dependency families and their trust implications:"}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Package"}),(0,s.jsx)(r.th,{children:"Purpose"}),(0,s.jsx)(r.th,{children:"Network access?"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"langchain-*"})}),(0,s.jsx)(r.td,{children:"LLM orchestration"}),(0,s.jsx)(r.td,{children:"Yes (provider APIs)"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"langgraph"})}),(0,s.jsx)(r.td,{children:"Agent graph execution"}),(0,s.jsx)(r.td,{children:"No"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"playwright"})}),(0,s.jsx)(r.td,{children:"Browser automation"}),(0,s.jsx)(r.td,{children:"Yes (target sites)"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"crawl4ai"})}),(0,s.jsx)(r.td,{children:"Web crawling"}),(0,s.jsx)(r.td,{children:"Yes (target sites)"})]})]})]}),"\n",(0,s.jsxs)(r.p,{children:["Toolkit MCP servers may introduce additional dependencies. Review their ",(0,s.jsx)(r.code,{children:"requirements.txt"})," or ",(0,s.jsx)(r.code,{children:"package.json"})," before installing."]}),"\n",(0,s.jsx)(r.hr,{}),"\n",(0,s.jsx)(r.h2,{id:"reporting-security-issues",children:"Reporting Security Issues"}),"\n",(0,s.jsx)(r.p,{children:"Found a vulnerability? Please report it responsibly:"}),"\n",(0,s.jsxs)(r.ol,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Do not"})," open a public GitHub issue for security bugs"]}),"\n",(0,s.jsx)(r.li,{children:"Email the maintainer directly or use GitHub's private vulnerability reporting"}),"\n",(0,s.jsx)(r.li,{children:"Include: description, steps to reproduce, affected version, and potential impact"}),"\n",(0,s.jsx)(r.li,{children:"Allow reasonable time for a fix before public disclosure"}),"\n"]}),"\n",(0,s.jsxs)(r.p,{children:["See ",(0,s.jsx)(r.a,{href:"/docs/contributing",children:"Contributing"})," for the general project contact points."]})]})}function h(e={}){const{wrapper:r}={...(0,t.R)(),...e.components};return r?(0,s.jsx)(r,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}},8453(e,r,i){i.d(r,{R:()=>o,x:()=>c});var n=i(6540);const s={},t=n.createContext(s);function o(e){const r=n.useContext(t);return n.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function c(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),n.createElement(t.Provider,{value:r},e.children)}}}]);