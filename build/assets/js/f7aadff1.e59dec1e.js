"use strict";(self.webpackChunkciri_docs=self.webpackChunkciri_docs||[]).push([[6801],{3296(e,n,r){r.r(n),r.d(n,{assets:()=>d,contentTitle:()=>c,default:()=>h,frontMatter:()=>o,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"features/memory","title":"Persistent Workspace Memory","description":"Ciri maintains a long-term understanding of your workspace through a two-level markdown-based memory system. This is not a database or vector store \u2014 it is a curated set of .md files that are injected into every single conversation turn, ensuring Ciri always has your context at hand.","source":"@site/docs/features/memory.md","sourceDirName":"features","slug":"/features/memory","permalink":"/docs/features/memory","draft":false,"unlisted":false,"editUrl":"https://github.com/adimis-ai/ciri/tree/main/docs-site/docs/features/memory.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Examples & Tutorials","permalink":"/docs/examples"},"next":{"title":"Human-in-the-Loop (HITL)","permalink":"/docs/features/hitl"}}');var i=r(4848),t=r(8453);const o={},c="Persistent Workspace Memory",d={},a=[{value:"Why Memory Matters",id:"why-memory-matters",level:2},{value:"The Two-Level Memory System",id:"the-two-level-memory-system",level:2},{value:"AGENT.md \u2014 The Workspace Index",id:"agentmd--the-workspace-index",level:2},{value:"How Memory Is Populated",id:"how-memory-is-populated",level:2},{value:"Automatic (via <code>/sync</code>)",id:"automatic-via-sync",level:3},{value:"Ciri Updates Memory Automatically",id:"ciri-updates-memory-automatically",level:3},{value:"Manual Editing",id:"manual-editing",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"Memory File Reference",id:"memory-file-reference",level:2}];function l(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"persistent-workspace-memory",children:"Persistent Workspace Memory"})}),"\n",(0,i.jsxs)(n.p,{children:["Ciri maintains a long-term understanding of your workspace through a ",(0,i.jsx)(n.strong,{children:"two-level markdown-based memory system"}),". This is not a database or vector store \u2014 it is a curated set of ",(0,i.jsx)(n.code,{children:".md"})," files that are injected into every single conversation turn, ensuring Ciri always has your context at hand."]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"why-memory-matters",children:"Why Memory Matters"}),"\n",(0,i.jsxs)(n.p,{children:["Standard LLM contexts are ephemeral. Without persistent memory, Ciri would forget your stack, your conventions, your domain vocabulary, and your past decisions after every session. The ",(0,i.jsx)(n.code,{children:"MemoryMiddleware"})," solves this by making critical knowledge permanent."]}),"\n",(0,i.jsx)(n.p,{children:"With workspace memory:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Ciri knows your architecture without you explaining it every time"}),"\n",(0,i.jsx)(n.li,{children:"She uses your preferred naming conventions, tone, and style automatically"}),"\n",(0,i.jsx)(n.li,{children:"She remembers the lessons learned from past sessions"}),"\n",(0,i.jsx)(n.li,{children:"She understands your domain \u2014 whether that's fintech, legal, marketing, or engineering"}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"the-two-level-memory-system",children:"The Two-Level Memory System"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"~/.local/share/ciri/memory/    \u2190 Global memory (cross-project)\n\u251c\u2500\u2500 global-preferences.md      \u2190 Your universal preferences and working style\n\n<project>/\n\u2514\u2500\u2500 .ciri/memory/              \u2190 Workspace memory (this project)\n    \u251c\u2500\u2500 AGENT.md               \u2190 Master index \u2014 Ciri reads this first\n    \u251c\u2500\u2500 architecture.md        \u2190 System structure, modules, data flow\n    \u251c\u2500\u2500 conventions.md         \u2190 Code style, naming, tone, formatting rules\n    \u251c\u2500\u2500 domain.md              \u2190 Business concepts, glossary, key entities\n    \u251c\u2500\u2500 workflows.md           \u2190 Recurring processes and procedures\n    \u2514\u2500\u2500 <topic>.md             \u2190 Any additional topic files you create\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Load order"})," (additive \u2014 both levels are always injected):"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Core harness memory (",(0,i.jsx)(n.code,{children:"~/.local/share/ciri/memory/"}),") \u2014 global preferences"]}),"\n",(0,i.jsxs)(n.li,{children:["Project harness memory (",(0,i.jsx)(n.code,{children:".ciri/memory/"}),") \u2014 this workspace's knowledge"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["All ",(0,i.jsx)(n.code,{children:".md"})," files from both locations are injected into the system prompt on every turn."]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"agentmd--the-workspace-index",children:"AGENT.md \u2014 The Workspace Index"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"AGENT.md"})," is the primary memory file. Ciri is instructed to read it at the start of complex tasks. It serves as an index and quick-reference for everything important about your workspace."]}),"\n",(0,i.jsxs)(n.p,{children:["A well-structured ",(0,i.jsx)(n.code,{children:"AGENT.md"})," contains:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-markdown",children:"# Workspace: [Project Name]\n\n## Overview\n[1-3 sentences describing what this workspace is and does]\n\n## Directory Structure\n- `src/` \u2014 [description]\n- `docs/` \u2014 [description]\n\n## Key Technologies\n- Python 3.12 + FastAPI\n- PostgreSQL (via SQLAlchemy)\n- React + Tailwind on the frontend\n\n## Common Tasks\n- Run dev server: `uvicorn src.main:app --reload`\n- Run tests: `pytest tests/ -q`\n- Deploy: `./scripts/deploy.sh staging`\n\n## Conventions\n- All API endpoints use snake_case\n- Models use Pydantic v2\n- Prefer functional style (avoid classes where possible)\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"how-memory-is-populated",children:"How Memory Is Populated"}),"\n",(0,i.jsxs)(n.h3,{id:"automatic-via-sync",children:["Automatic (via ",(0,i.jsx)(n.code,{children:"/sync"}),")"]}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"/sync"})," command invokes the ",(0,i.jsx)(n.strong,{children:"Trainer Agent"}),", which:"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Scans your project root (excluding ",(0,i.jsx)(n.code,{children:".ciri"}),")"]}),"\n",(0,i.jsx)(n.li,{children:"Analyzes your workspace's purpose, structure, and domain"}),"\n",(0,i.jsx)(n.li,{children:"Creates or updates memory files with accurate, actionable summaries"}),"\n",(0,i.jsxs)(n.li,{children:["Writes an ",(0,i.jsx)(n.code,{children:"AGENT.md"})," index if it doesn't exist"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"You > /sync\n"})}),"\n",(0,i.jsxs)(n.p,{children:["After sync, run ",(0,i.jsx)(n.code,{children:"/sync"})," again whenever your project changes significantly."]}),"\n",(0,i.jsx)(n.h3,{id:"ciri-updates-memory-automatically",children:"Ciri Updates Memory Automatically"}),"\n",(0,i.jsx)(n.p,{children:"After completing significant work, Ciri is instructed to update relevant memory files:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Ciri > I've refactored the authentication module. Updating .ciri/memory/architecture.md\n       with the new session management approach...\n"})}),"\n",(0,i.jsx)(n.h3,{id:"manual-editing",children:"Manual Editing"}),"\n",(0,i.jsxs)(n.p,{children:["Edit any ",(0,i.jsx)(n.code,{children:".ciri/memory/*.md"})," file directly. Changes take effect on the next conversation turn \u2014 no restart needed."]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Keep it concise and actionable."}),"\nMemory files are injected on every turn. Bloated files waste context tokens. Focus on facts Ciri will actually need \u2014 not logs or histories."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Use specific, Ciri-directed language."}),"\nWrite memory as instructions to Ciri, not documentation for humans:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:'\u274c "The authentication module uses JWT tokens."'}),"\n",(0,i.jsxs)(n.li,{children:['\u2705 "When working with auth, always use the ',(0,i.jsx)(n.code,{children:"AuthService"})," class in ",(0,i.jsx)(n.code,{children:"src/auth/service.py"}),'. Never bypass the JWT middleware."']}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:'Document "the flavor" of your domain.'}),"\nWhat makes your workspace unique? Your naming conventions, preferred patterns, communication tone, domain vocabulary. This is what transforms Ciri from a generic assistant into a specialist."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Don't duplicate external docs."}),"\nIf you have large external documentation, store a high-level summary + the location, not the full content:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-markdown",children:"## External References\n- API docs: https://internal.company.com/api-docs (requires VPN)\n- Architecture decision records: `docs/adr/`\n- Design system: `packages/design-system/README.md`\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Split by topic."}),"\nDon't put everything in ",(0,i.jsx)(n.code,{children:"AGENT.md"}),". Create separate files for architecture, conventions, domain, and workflows. Each file should be under 200 lines."]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"memory-file-reference",children:"Memory File Reference"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"File"}),(0,i.jsx)(n.th,{children:"Content"}),(0,i.jsx)(n.th,{children:"Updated by"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"AGENT.md"})}),(0,i.jsx)(n.td,{children:"Master index, workspace overview"}),(0,i.jsxs)(n.td,{children:["Trainer Agent on ",(0,i.jsx)(n.code,{children:"/sync"})]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"architecture.md"})}),(0,i.jsx)(n.td,{children:"Module structure, data flow, dependencies"}),(0,i.jsx)(n.td,{children:"Ciri after refactors"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"conventions.md"})}),(0,i.jsx)(n.td,{children:"Style, naming, communication tone"}),(0,i.jsxs)(n.td,{children:["Manual or via ",(0,i.jsx)(n.code,{children:"/sync"})]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"domain.md"})}),(0,i.jsx)(n.td,{children:"Business concepts, glossary, entities"}),(0,i.jsxs)(n.td,{children:["Manual or via ",(0,i.jsx)(n.code,{children:"/sync"})]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"workflows.md"})}),(0,i.jsx)(n.td,{children:"Recurring processes, runbooks"}),(0,i.jsxs)(n.td,{children:["Manual or via ",(0,i.jsx)(n.code,{children:"/sync"})]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"<custom>.md"})}),(0,i.jsx)(n.td,{children:"Any topic you add"}),(0,i.jsx)(n.td,{children:"You or Ciri"})]})]})]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},8453(e,n,r){r.d(n,{R:()=>o,x:()=>c});var s=r(6540);const i={},t=s.createContext(i);function o(e){const n=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);